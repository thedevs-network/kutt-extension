import{u as R,r as i,j as e,I as x,c as m,a as v,b as O,E as u,i as U,m as B,d as q,e as k,g as X,f as G,R as E,h as $,B as z,L as J,k as Z,l as ee,n as se,o as oe}from"./Loader-COv0jRMw.chunk.js";import{b as D,C as te,S as re,K as ne}from"./background.bundle.js";import{C as A,Q as ae}from"./index-DiGfVt06.chunk.js";/* empty css                   */function L(){return D.runtime.openOptionsPage()}function ie(){return D.tabs.create({active:!0,url:"/History/history.html"})}function le(){return D.tabs.query({active:!0,lastFocusedWindow:!0})}const ce="_popupBody_195f8_1",de="_icon_195f8_7",pe="_qrIcon_195f8_19",ue="_copyIcon_195f8_24",me="_link_195f8_29",he="_errorMessage_195f8_44",_e="_qrCodeContainer_195f8_51",w={popupBody:ce,icon:de,qrIcon:pe,copyIcon:ue,link:me,errorMessage:he,qrCodeContainer:_e};function fe(){const[{error:a,message:l}]=R(),[h,d]=i.useState(!1),[c,_]=i.useState(!1);return i.useEffect(()=>{let s=null;return s=setTimeout(()=>{d(!1)},1300),()=>{s&&clearTimeout(s)}},[h]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:w.popupBody,children:a?e.jsx("p",{className:w.errorMessage,children:l}):e.jsxs(e.Fragment,{children:[e.jsx(x,{className:m(w.icon,w.qrIcon),name:"qrcode",onClick:()=>_(!c)}),h?e.jsx(x,{className:m(w.icon,w.copyIcon),name:"tick"}):e.jsx(A,{text:l,onCopy:()=>d(!0),children:e.jsx(x,{className:m(w.icon,w.copyIcon),name:"copy"})}),e.jsx(A,{text:l,onCopy:()=>d(!0),children:e.jsx("h1",{className:w.link,children:v(l)})})]})}),!a&&c&&e.jsx("div",{className:w.qrCodeContainer,children:e.jsx(ae,{size:128,value:l})})]})}const we="_header_17tfr_1",ge="_logoLink_17tfr_9",ye="_logo_17tfr_9",xe="_actions_17tfr_24",Se="_iconWrapper_17tfr_29",je="_tooltip_17tfr_33",Ne="_styledIcon_17tfr_38",p={header:we,logoLink:ge,logo:ye,actions:xe,iconWrapper:Se,tooltip:je,styledIcon:Ne};function Te(){const[a,l]=O(),[h,d]=i.useState(!1),[c,_]=i.useState({error:null,message:u}),s=i.useRef(null);i.useEffect(()=>()=>{s.current&&clearTimeout(s.current)},[]);async function f(){d(!0);const y={apikey:a.apikey,hostUrl:a.host.hostUrl},N=await B.send(te,y);if(d(!1),N.error)_({error:!0,message:N.message}),await q({user:null});else{_({error:!1,message:"Fetching domains successful"});const{domains:r,email:S}=N.data;await q({user:{domains:r,email:S}})}l({type:k.RELOAD_EXTENSION_SETTINGS,payload:!a.reload}),s.current&&clearTimeout(s.current),s.current=setTimeout(()=>{_({error:null,message:u})},1e3)}const g=h?"spinner":!U(c.error)&&(c.error?"cross":"tick")||"refresh";return e.jsxs("header",{className:p.header,children:[e.jsx("a",{href:a.host.hostUrl,target:"_blank",rel:"noopener noreferrer",className:p.logoLink,children:e.jsx("img",{className:p.logo,width:"32",height:"32",src:"../assets/logo.png",alt:"logo"})}),e.jsxs("div",{className:p.actions,children:[e.jsxs("span",{className:p.iconWrapper,children:[e.jsx(x,{onClick:f,name:g,className:m("icon",p.styledIcon)}),e.jsx("span",{className:p.tooltip,children:"Sync account"})]}),a.history&&e.jsxs("span",{className:p.iconWrapper,children:[e.jsx(x,{onClick:ie,name:"clock",className:m("icon",p.styledIcon)}),e.jsx("span",{className:p.tooltip,children:"History"})]}),e.jsxs("span",{className:p.iconWrapper,children:[e.jsx(x,{onClick:L,name:"settings",className:m("icon",p.styledIcon)}),e.jsx("span",{className:p.tooltip,children:"Settings"})]})]})]})}const Ee="_formContainer_1i52w_1",be="_formGroup_1i52w_12",Ie="_formGroupRelative_1i52w_18",Ce="_label_1i52w_25",ve="_labelAbsolute_1i52w_37",ke="_dropdown_1i52w_51",Re="_dropdownTrigger_1i52w_55",Oe="_open_1i52w_77",Ue="_dropdownValue_1i52w_87",De="_hasValue_1i52w_94",Pe="_dropdownIcon_1i52w_98",qe="_dropdownMenu_1i52w_109",Ae="_dropdownItem_1i52w_133",Be="_selected_1i52w_156",Ge="_input_1i52w_161",Le="_inputError_1i52w_188",Ve="_errorText_1i52w_192",Fe="_passwordWrapper_1i52w_203",We="_passwordToggle_1i52w_207",Me="_passwordToggleIcon_1i52w_217",He="_submitButton_1i52w_233",Qe="_createIcon_1i52w_269",o={formContainer:Ee,formGroup:be,formGroupRelative:Ie,label:Ce,labelAbsolute:ve,dropdown:ke,dropdownTrigger:Re,open:Oe,dropdownValue:Ue,hasValue:De,dropdownIcon:Pe,dropdownMenu:qe,dropdownItem:Ae,selected:Be,input:Ge,inputError:Le,errorText:Ve,passwordWrapper:Fe,passwordToggle:We,passwordToggleIcon:Me,submitButton:He,createIcon:Qe};var V=(a=>(a.DefaultDomainId="default",a))(V||{});function Ke(){const a=O()[0],l=R()[1],[h,d]=i.useState(!1),[c,_]=i.useState(!1),[s,f]=i.useState(!1),g=i.useRef(null),{domainOptions:y,host:{hostDomain:N}}=a;i.useEffect(()=>{function t(n){g.current&&!g.current.contains(n.target)&&f(!1)}return document.addEventListener("mousedown",t),()=>document.removeEventListener("mousedown",t)},[]);const[r,S]=i.useState({domain:y.find(({id:t})=>t==="default")?.value?.trim()||u,customurl:"",password:""}),[j,T]=i.useState({}),I=!j.customurl&&!j.password&&!0;async function W(){_(!0);const t=await le(),n=X(t,"[0].url",null);if(!(!U(n)&&G(n))){_(!1),l({type:E.SET_REQUEST_STATUS,payload:{error:!0,message:"Not a valid URL"}});return}const Q={apiBody:{apikey:a.apikey,target:n,...r.customurl.trim()!==u&&{customurl:r.customurl.trim()},...!$(r.password)&&{password:r.password},reuse:a.reuse,...r.domain.trim()!==u&&{domain:r.domain.trim()}},hostUrl:a.host.hostUrl},C=await B.send(re,Q);if(_(!1),C.error)l({type:E.SET_REQUEST_STATUS,payload:{error:!0,message:C.message}});else{const{data:{link:K}}=C;l({type:E.SET_REQUEST_STATUS,payload:{error:!1,message:K}}),S(Y=>({...Y,customurl:"",password:""})),T({})}}function M(t){S(n=>({...n,customurl:t})),t.length>0&&t.length<3?T(n=>({...n,customurl:"Custom URL must be at-least 3 characters"})):T(n=>({...n,customurl:void 0}))}function H(t){S(n=>({...n,password:t})),t.length>0&&t.length<3?T(n=>({...n,password:"Password must be at-least 3 characters"})):T(n=>({...n,password:void 0}))}return e.jsxs("div",{className:o.formContainer,children:[e.jsxs("div",{className:o.formGroup,children:[e.jsx("label",{className:o.label,children:"Domain"}),e.jsxs("div",{className:o.dropdown,ref:g,children:[e.jsxs("button",{type:"button",className:m(o.dropdownTrigger,s&&o.open),onClick:()=>!c&&f(!s),disabled:c,children:[e.jsx("span",{className:m(o.dropdownValue,r.domain&&o.hasValue),children:y.find(({value:t})=>t===r.domain)?.option||r.domain&&v(r.domain)||"Select domain"}),e.jsx(x,{name:"chevron-down",className:m(o.dropdownIcon,s&&o.open)})]}),s&&e.jsx("div",{className:o.dropdownMenu,children:y.filter(({disabled:t})=>!t).length>0?y.filter(({disabled:t})=>!t).map(({id:t,option:n,value:b})=>e.jsx("button",{type:"button",className:m(o.dropdownItem,r.domain===b&&o.selected),onClick:()=>{S(P=>({...P,domain:b})),f(!1)},children:n||v(b)},t)):e.jsx("span",{className:o.dropdownItem,children:"No domains available"})})]})]}),e.jsxs("div",{className:o.formGroupRelative,children:[e.jsx("label",{htmlFor:"customurl",className:o.labelAbsolute,children:e.jsxs("span",{children:[N,"/"]})}),e.jsx("input",{id:"customurl",name:"customurl",type:"text",value:r.customurl,onChange:t=>{M(t.target.value.trim())},disabled:c,spellCheck:"false",className:m(o.input,j.customurl&&o.inputError)}),e.jsx("span",{className:o.errorText,children:j.customurl})]}),e.jsxs("div",{className:o.formGroupRelative,children:[e.jsx("label",{htmlFor:"password",className:o.labelAbsolute,children:e.jsx("span",{children:"Password"})}),e.jsxs("div",{className:o.passwordWrapper,children:[e.jsx("div",{className:o.passwordToggle,children:e.jsx(x,{onClick:()=>{c||d(!h)},name:h?"eye":"eye-closed",className:o.passwordToggleIcon})}),e.jsx("input",{id:"password",name:"password",type:h?"text":"password",value:r.password,spellCheck:"false",onChange:t=>{H(t.target.value)},disabled:c,className:m(o.input,j.password&&o.inputError)})]}),e.jsx("span",{className:o.errorText,children:j.password})]}),e.jsx("button",{type:"button",disabled:!I||c,onClick:W,className:o.submitButton,children:c?e.jsx(x,{className:o.createIcon,name:"spinner"}):e.jsx("span",{children:"Create"})})]})}const Ye="_popup_xelqh_1",Xe={popup:Ye};function $e(){const[a,l]=O(),[h,d]=R(),{reload:c}=a;return i.useEffect(()=>{async function _(){const{settings:s={}}=await Z();if(!Object.prototype.hasOwnProperty.call(s,"apikey")||s.apikey===u){d({type:E.SET_REQUEST_STATUS,payload:{error:!0,message:"Extension requires an API Key to work"}}),d({type:E.SET_LOADING,payload:!1}),setTimeout(()=>L(),1300);return}let f=ne;Object.prototype.hasOwnProperty.call(s,"advanced")&&s.advanced&&Object.prototype.hasOwnProperty.call(s,"host")&&s.host?.trim().length>0&&G(s.host)&&(f={hostDomain:s.host.replace("http://",u).replace("https://",u).replace("www.",u).split(/[/?#]/)[0]||u,hostUrl:s.host.endsWith("/")?s.host.slice(0,-1):s.host});let g=!0;Object.prototype.hasOwnProperty.call(s,"history")&&(g=s.history);const y=[{id:u,option:"-- Choose Domain --",value:u,disabled:!0},{id:V.DefaultDomainId,option:f.hostDomain,value:f.hostDomain,disabled:!1}];if(Object.prototype.hasOwnProperty.call(s,"user")&&s.user){const{user:N}=s;let r=N.domains.map(({id:S,address:j,homepage:T,banned:I})=>({id:S,option:T,value:j,disabled:I}));r=y.concat(r),l({type:k.HYDRATE_EXTENSION_SETTINGS,payload:{apikey:s.apikey?.trim(),domainOptions:r,host:f,history:g,reuse:s.reuse||!1}})}else l({type:k.HYDRATE_EXTENSION_SETTINGS,payload:{apikey:s.apikey?.trim(),domainOptions:y,host:f,history:g,reuse:s.reuse||!1}});d({type:E.SET_LOADING,payload:!1})}_()},[c,l,d]),e.jsx(z,{children:e.jsx("div",{id:"popup",className:Xe.popup,children:h.loading?e.jsx(J,{}):e.jsxs(e.Fragment,{children:[e.jsx(Te,{}),!U(h.error)&&e.jsx(fe,{}),e.jsx(Ke,{})]})})})}const F=document.getElementById("popup-root");if(!F)throw new Error("Could not find popup-root container");const ze=ee.createRoot(F);ze.render(e.jsx(i.StrictMode,{children:e.jsx(se,{children:e.jsx(oe,{children:e.jsx($e,{})})})}));
