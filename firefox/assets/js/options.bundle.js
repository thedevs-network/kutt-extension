import{E as F,r as c,j as e,c as i,I as d,b as W,p as b,d as T,i as E,m as H,f as R,q as O,u as D,B as G,L as V,k as $,e as M,R as Y,l as z,n as J,o as X}from"./Loader-COv0jRMw.chunk.js";import{a as L,K as N,C as Q}from"./background.bundle.js";import{H as Z}from"./Header-CVO8RHl_.chunk.js";/* empty css                   */const ee=[["edge-chromium",/Edg\/([0-9.]+)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9.]+)(?:\s|$)/],["opera",/Opera\/([0-9.]+)(?:\s|$)/],["opera",/OPR\/([0-9.]+)(:?\s|$)/]];function te(r){return r!==F&&ee.reduce((p,[u,f])=>{if(p)return p;const h=f.exec(r);return!!h&&[u,h]},!1)}function se(){const r=te(navigator.userAgent);if(!r)return null;const[p,u]=r;return u[1]&&u[1].split(/[._]/).slice(0,3),p}const ne="_footer_1rq48_1",ae="_ratingSection_1rq48_8",oe="_dividerLine_1rq48_14",re="_left_1rq48_19",ie="_right_1rq48_22",le="_ratingLink_1rq48_26",ce="_starsContainer_1rq48_35",de="_starIcon_1rq48_40",ue="_gray_1rq48_52",pe="_ratingText_1rq48_62",me="_linksSection_1rq48_67",he="_linkItem_1rq48_75",xe="_narrow_1rq48_85",ge="_wide_1rq48_88",_e="_linkDivider_1rq48_92",a={footer:ne,ratingSection:ae,dividerLine:oe,left:re,right:ie,ratingLink:le,starsContainer:ce,starIcon:de,gray:ue,ratingText:pe,linksSection:me,linkItem:he,narrow:xe,wide:ge,linkDivider:_e};function ke(){return e.jsx(e.Fragment,{children:e.jsxs("footer",{className:a.footer,children:[e.jsxs("div",{className:a.ratingSection,children:[e.jsx("span",{className:i(a.dividerLine,a.left)}),e.jsxs("a",{href:se()==="firefox"?L.firefox:L.chrome,target:"_blank",rel:"nofollow noopener noreferrer",className:a.ratingLink,children:[e.jsxs("div",{className:a.starsContainer,children:[e.jsx(d,{className:i(a.starIcon,a.gray),name:"star-white"}),e.jsx(d,{className:i(a.starIcon,a.gray),name:"star-white"}),e.jsx(d,{className:i(a.starIcon,a.gray),name:"star-white"}),e.jsx(d,{className:i(a.starIcon,a.gray),name:"star-white"}),e.jsx(d,{className:i(a.starIcon,a.gray),name:"star-white"})]}),e.jsx("p",{className:a.ratingText,children:"Rate on Store"})]}),e.jsx("span",{className:i(a.dividerLine,a.right)})]}),e.jsxs("div",{className:a.linksSection,children:[e.jsx("a",{href:"https://kutt.it",target:"_blank",rel:"nofollow noopener noreferrer",className:i(a.linkItem,a.narrow),children:"Kutt.it"}),e.jsx("span",{className:a.linkDivider}),e.jsx("a",{href:"https://git.io/Jn5hS",target:"_blank",rel:"nofollow noopener noreferrer",className:i(a.linkItem,a.wide),children:"Report an issue"}),e.jsx("span",{className:a.linkDivider}),e.jsx("a",{href:"https://github.com/thedevs-network/kutt-extension",target:"_blank",rel:"nofollow noopener noreferrer",className:i(a.linkItem,a.narrow),children:"GitHub"})]})]})})}const fe=c.memo(ke),be="_formSection_1kxub_1",je="_inputGroup_1kxub_5",ye="_label_1kxub_11",ve="_labelLink_1kxub_20",Ne="_labelLinkWrapper_1kxub_32",Ie="_tooltip_1kxub_37",Se="_labelWithInfo_1kxub_42",we="_inputWrapper_1kxub_48",Ce="_inputIconWrapper_1kxub_52",Te="_inputIcon_1kxub_52",Ee="_input_1kxub_5",Le="_inputError_1kxub_102",We="_errorText_1kxub_106",Re="_validateSection_1kxub_117",Ae="_validateButton_1kxub_123",Ke="_validateIcon_1kxub_159",qe="_validationFeedback_1kxub_170",Be="_error_1kxub_106",Pe="_success_1kxub_182",Ue="_feedbackIcon_1kxub_187",Fe="_feedbackMessage_1kxub_202",He="_toggleSection_1kxub_224",Oe="_toggleLabel_1kxub_232",De="_toggleText_1kxub_247",Ge="_toggleTextWithInfo_1kxub_251",Ve="_infoIcon_1kxub_257",$e="_toggleWrapper_1kxub_305",Me="_toggleTrack_1kxub_313",Ye="_toggleKnob_1kxub_325",ze="_active_1kxub_336",Je="_toggleInput_1kxub_344",Xe="_advancedSection_1kxub_351",Qe="_hidden_1kxub_362",Ze="_resetSection_1kxub_371",et="_resetButton_1kxub_381",tt="_resetHint_1kxub_397",st="_modalOverlay_1kxub_402",nt="_modal_1kxub_402",at="_modalHeader_1kxub_444",ot="_modalIcon_1kxub_451",rt="_modalTitle_1kxub_460",it="_modalText_1kxub_466",lt="_modalActions_1kxub_473",ct="_modalCancelButton_1kxub_479",dt="_modalConfirmButton_1kxub_494",t={formSection:be,inputGroup:je,label:ye,labelLink:ve,labelLinkWrapper:Ne,tooltip:Ie,labelWithInfo:Se,inputWrapper:we,inputIconWrapper:Ce,inputIcon:Te,input:Ee,inputError:Le,errorText:We,validateSection:Re,validateButton:Ae,validateIcon:Ke,validationFeedback:qe,error:Be,success:Pe,feedbackIcon:Ue,feedbackMessage:Fe,toggleSection:He,toggleLabel:Oe,toggleText:De,toggleTextWithInfo:Ge,infoIcon:Ve,toggleWrapper:$e,toggleTrack:Me,toggleKnob:Ye,active:ze,toggleInput:Je,advancedSection:Xe,hidden:Qe,resetSection:Ze,resetButton:et,resetHint:tt,modalOverlay:st,modal:nt,modalHeader:at,modalIcon:ot,modalTitle:rt,modalText:it,modalActions:lt,modalCancelButton:ct,modalConfirmButton:dt},ut=r=>T(r);function pt(){const r=W()[0],p=c.useRef(null),[u,f]=c.useState(!1),[h,S]=c.useState(!1),[l,x]=c.useState(!1),[m,j]=c.useState({error:null,message:""}),[o,y]=c.useState({apikey:r.apikey,history:r.history,advanced:r.advanced,host:r.advanced&&r.host.hostUrl||"",reuse:r.reuse}),[I,g]=c.useState({}),[_,k]=c.useState({}),K=(b(_.apikey)||_.apikey)&&o.apikey.trim().length===40&&b(I.apikey)&&((b(_.host)||_.host)&&b(I.host)||!o.advanced)||!1;c.useEffect(()=>{ut({...o,...o.advanced===!1&&{host:""}})},[o]);function q(n){y(s=>({...s,apikey:n})),n.trim().length>0?n&&n.trim().length<40?(g(s=>({...s,apikey:"API key must be 40 characters"})),k(s=>({...s,apikey:!1}))):n&&n.trim().length>40?(g(s=>({...s,apikey:"API key cannot exceed 40 characters"})),k(s=>({...s,apikey:!1}))):(g(s=>{const{apikey:w,...v}=s;return v}),k(s=>({...s,apikey:!0}))):(g(s=>({...s,apikey:"API key missing"})),k(s=>({...s,apikey:!1})))}function B(n){if(!o.advanced){g(s=>({...s,host:"Enable Advanced Options first"})),k(s=>({...s,host:!1}));return}if(y(s=>({...s,host:n})),!(n.trim().length>0)){g(s=>({...s,host:"Custom URL cannot be empty"})),k(s=>({...s,host:!1}));return}!R(n.trim())||n.trim().length<10?(g(s=>({...s,host:"Please enter a valid url"})),k(s=>({...s,host:!1}))):(g(s=>{const{host:w,...v}=s;return v}),k(s=>({...s,host:!0})))}async function P(){f(!0);const n={apikey:o.apikey.trim(),hostUrl:o.advanced&&o.host.trim().length>0&&o.host.trim()||N.hostUrl},s=await H.send(Q,n);if(s.error)j({error:!0,message:s.message}),await T({user:null});else{j({error:!1,message:"Valid API Key"});const{domains:w,email:v}=s.data;await T({user:{domains:w,email:v}})}f(!1),setTimeout(()=>{j({error:null,message:""})},3e3)}async function U(){await O(),x(!1),window.location.reload()}return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:t.formSection,children:e.jsxs("div",{className:t.inputGroup,children:[e.jsxs("label",{htmlFor:"apikey",className:t.label,children:["API Key",e.jsxs("span",{className:t.labelLinkWrapper,children:[e.jsx("a",{href:`${o.advanced&&o.host||N.hostUrl}/login`,target:"blank",rel:"nofollow noopener noreferrer",className:t.labelLink,children:"get one?"}),e.jsx("span",{className:t.tooltip,children:"Get your API key from your Kutt account settings page"})]})]}),e.jsxs("div",{className:t.inputWrapper,children:[e.jsx("div",{className:t.inputIconWrapper,children:e.jsx(d,{className:t.inputIcon,onClick:()=>S(!h),name:h?"eye":"eye-closed"})}),e.jsx("input",{id:"apikey",name:"apikey",type:h?"text":"password",value:o.apikey,onChange:n=>{q(n.target.value.trim())},spellCheck:"false",className:i(t.input,!b(_.apikey)&&!_.apikey&&t.inputError)})]}),e.jsx("span",{className:t.errorText,children:I.apikey})]})}),e.jsxs("div",{className:t.validateSection,children:[e.jsxs("button",{type:"button",disabled:u||!K,onClick:P,className:t.validateButton,children:[e.jsx("span",{className:t.validateText,children:"Validate"}),e.jsx(d,{name:u?"spinner":!E(m.error)&&(!m.error&&"tick"||"cross")||"zap",className:t.validateIcon})]}),!E(m.error)&&e.jsxs("div",{className:i(t.validationFeedback,m.error?t.error:t.success),children:[e.jsx(d,{className:t.feedbackIcon,name:m.error?"cross":"tick"}),e.jsx("span",{className:t.feedbackMessage,children:m.message})]})]}),e.jsxs("div",{className:t.toggleSection,children:[e.jsxs("label",{htmlFor:"history",className:t.toggleLabel,children:[e.jsxs("span",{className:t.toggleTextWithInfo,children:[e.jsx("span",{className:t.toggleText,children:"Show Recent Links"}),e.jsxs("span",{className:t.infoIcon,children:[e.jsx(d,{name:"info"}),e.jsx("span",{className:t.tooltip,children:"Enables the History page to view your recent shortened links"})]})]}),e.jsxs("span",{className:t.toggleWrapper,children:[e.jsx("span",{className:t.toggleTrack}),e.jsx("span",{className:i(t.toggleKnob,o.history&&t.active),children:e.jsx("input",{id:"history",name:"history",type:"checkbox",checked:o.history,onChange:n=>{y(s=>({...s,history:n.target.checked}))},className:t.toggleInput})})]})]}),e.jsxs("label",{htmlFor:"reuse",className:t.toggleLabel,children:[e.jsxs("span",{className:t.toggleTextWithInfo,children:[e.jsx("span",{className:t.toggleText,children:"Reuse Existing URLs"}),e.jsxs("span",{className:t.infoIcon,children:[e.jsx(d,{name:"info"}),e.jsx("span",{className:t.tooltip,children:"Returns the existing short link if the same URL was shortened before"})]})]}),e.jsxs("span",{className:t.toggleWrapper,children:[e.jsx("span",{className:t.toggleTrack}),e.jsx("span",{className:i(t.toggleKnob,o.reuse&&t.active),children:e.jsx("input",{id:"reuse",name:"reuse",type:"checkbox",checked:o.reuse,onChange:n=>{y(s=>({...s,reuse:n.target.checked}))},className:t.toggleInput})})]})]}),e.jsxs("label",{htmlFor:"advanced",className:t.toggleLabel,children:[e.jsxs("span",{className:t.toggleTextWithInfo,children:[e.jsx("span",{className:t.toggleText,children:"Show Advanced Options"}),e.jsxs("span",{className:t.infoIcon,children:[e.jsx(d,{name:"info"}),e.jsx("span",{className:t.tooltip,children:"Configure a custom self-hosted Kutt instance URL"})]})]}),e.jsxs("span",{className:t.toggleWrapper,children:[e.jsx("span",{className:t.toggleTrack}),e.jsx("span",{className:i(t.toggleKnob,o.advanced&&t.active),children:e.jsx("input",{id:"advanced",name:"advanced",type:"checkbox",checked:o.advanced,onChange:n=>{y(s=>({...s,advanced:n.target.checked})),n.target.checked&&setTimeout(()=>p.current?.focus(),350)},className:t.toggleInput})})]})]}),e.jsx("div",{className:i(t.advancedSection,!o.advanced&&t.hidden),children:e.jsxs("div",{className:t.inputGroup,children:[e.jsx("label",{htmlFor:"host",className:t.label,children:e.jsxs("span",{className:t.labelWithInfo,children:["Custom Host",e.jsxs("span",{className:t.infoIcon,children:[e.jsx(d,{name:"info"}),e.jsx("span",{className:t.tooltip,children:"URL of your self-hosted Kutt instance (e.g., https://kutt.example.com)"})]})]})}),e.jsx("div",{className:t.inputWrapper,children:e.jsx("input",{ref:p,id:"host",name:"host",type:"text",value:o.host,onChange:n=>{B(n.target.value.trim())},spellCheck:"false",className:i(t.input,!b(_.host)&&!_.host&&t.inputError)})}),e.jsx("span",{className:t.errorText,children:I.host})]})})]}),e.jsxs("div",{className:t.resetSection,children:[e.jsx("button",{type:"button",onClick:()=>x(!0),className:t.resetButton,children:"Reset All Settings"}),e.jsx("span",{className:t.resetHint,children:"This will clear all your settings and reload the extension"})]}),l&&e.jsx("div",{className:t.modalOverlay,onClick:()=>x(!1),onKeyDown:n=>{n.key==="Escape"&&x(!1)},role:"button",tabIndex:0,children:e.jsxs("div",{className:t.modal,onClick:n=>n.stopPropagation(),onKeyDown:n=>n.stopPropagation(),role:"button",tabIndex:0,children:[e.jsxs("div",{className:t.modalHeader,children:[e.jsx(d,{name:"info",className:t.modalIcon}),e.jsx("span",{className:t.modalTitle,children:"Reset Settings?"})]}),e.jsx("p",{className:t.modalText,children:"This will permanently delete your API key and all preferences. You will need to reconfigure the extension."}),e.jsxs("div",{className:t.modalActions,children:[e.jsx("button",{type:"button",onClick:()=>x(!1),className:t.modalCancelButton,children:"Cancel"}),e.jsx("button",{type:"button",onClick:U,className:t.modalConfirmButton,children:"Reset"})]})]})})]})}const mt="_optionsPage_15www_1",ht="_optionsContainer_15www_11",xt="_loaderContainer_15www_27",C={optionsPage:mt,optionsContainer:ht,loaderContainer:xt};function gt(){const[,r]=W(),[p,u]=D(),[f,h]=c.useState(N.hostUrl);return c.useEffect(()=>{async function S(){const{settings:l={}}=await $(),x=l?.advanced||!1,m=x&&l?.host&&R(l.host)&&{hostDomain:l.host.replace("http://","").replace("https://","").replace("www.","").split(/[/?#]/)[0]||"",hostUrl:l.host.endsWith("/")?l.host.slice(0,-1):l.host}||N,j=Object.prototype.hasOwnProperty.call(l,"history")?l.history:!0,o={apikey:l?.apikey?.trim()||"",history:j,advanced:m.hostUrl.trim()!==N.hostUrl&&x,host:m,reuse:l?.reuse||!1};h(o.host.hostUrl),r({type:M.HYDRATE_EXTENSION_SETTINGS,payload:o}),u({type:Y.SET_LOADING,payload:!1})}S()},[r,u]),e.jsx(e.Fragment,{children:e.jsx(G,{children:e.jsx("div",{id:"options",className:C.optionsPage,children:e.jsxs("div",{className:C.optionsContainer,children:[e.jsx(Z,{hostUrl:f}),p.loading?e.jsx("div",{className:C.loaderContainer,children:e.jsx(V,{})}):e.jsx(pt,{}),e.jsx(fe,{})]})})})})}const A=document.getElementById("options-root");if(!A)throw new Error("Could not find options-root container");const _t=z.createRoot(A);_t.render(e.jsx(c.StrictMode,{children:e.jsx(J,{children:e.jsx(X,{children:e.jsx(gt,{})})})}));
